{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/Lenovo/Documents/node/lennitaFront/LennitaBB/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Lenovo\\\\Documents\\\\node\\\\lennitaFront\\\\LennitaBB\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import axios from'axios';import{productsActions}from'../products-slice';import{uiActions}from'../ui-slice';import api from'../../utils/api';export var getProducts=function getProducts(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var fetchData,products;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch(uiActions.productsLoading());fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('http://localhost:8000/api/products');case 2:response=_context.sent;_context.next=5;return response.data;case 5:data=_context.sent;return _context.abrupt(\"return\",data);case 7:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref2.apply(this,arguments);};}();_context2.prev=2;_context2.next=5;return fetchData();case 5:products=_context2.sent;dispatch(productsActions.replaceProducts(products));dispatch(uiActions.productsLoading());_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](2);console.log('failed to fetch products');case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[2,10]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var getProductDetails=function getProductDetails(id){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var fetchData,productDetails;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dispatch(uiActions.pDetailLoading());fetchData=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var response,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.get(\"http://localhost:8000/api/products/\".concat(id));case 2:response=_context3.sent;_context3.next=5;return response.data;case 5:data=_context3.sent;return _context3.abrupt(\"return\",data);case 7:case\"end\":return _context3.stop();}}},_callee3);}));return function fetchData(){return _ref4.apply(this,arguments);};}();_context4.prev=2;_context4.next=5;return fetchData();case 5:productDetails=_context4.sent;dispatch(productsActions.setProductDetails(productDetails));dispatch(uiActions.pDetailLoading());_context4.next=13;break;case 10:_context4.prev=10;_context4.t0=_context4[\"catch\"](2);console.log('failed to fetch product details');case 13:case\"end\":return _context4.stop();}}},_callee4,null,[[2,10]]);}));return function(_x2){return _ref3.apply(this,arguments);};}();};export var addProduct=function addProduct(_ref5){var product=_ref5.product,token=_ref5.token;return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch){var postData,message;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:dispatch(uiActions.addPrductLoading());_context6.next=3;return api.get('/sanctum/csrf-cookie');case 3:postData=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var response,data;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return axios.post('http://localhost:8000/api/products',product,{headers:{'Content-Type':'multipart/form-data',Authorization:'Bearer '+token},withCredentials:true});case 2:response=_context5.sent;data=response.data;return _context5.abrupt(\"return\",data);case 5:case\"end\":return _context5.stop();}}},_callee5);}));return function postData(){return _ref7.apply(this,arguments);};}();_context6.prev=4;_context6.next=7;return postData();case 7:message=_context6.sent;console.log('message : ',message);dispatch(getProducts());// dispatch(productsActions.addProduct(product));\ndispatch(uiActions.addPrductLoading());_context6.next=16;break;case 13:_context6.prev=13;_context6.t0=_context6[\"catch\"](4);console.log(_context6.t0);case 16:case\"end\":return _context6.stop();}}},_callee6,null,[[4,13]]);}));return function(_x3){return _ref6.apply(this,arguments);};}();};export var updateProduct=function updateProduct(_ref8){var product=_ref8.product,id=_ref8.id,token=_ref8.token;return/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(dispatch){var putData;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:dispatch(uiActions.updateProductLoading());_context8.next=3;return api.get('/sanctum/csrf-cookie');case 3:putData=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var response,data;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return api.put(\"/api/products/\".concat(id),product,{headers:{Authorization:'Bearer '+token}});case 2:response=_context7.sent;data=response.data;return _context7.abrupt(\"return\",data);case 5:case\"end\":return _context7.stop();}}},_callee7);}));return function putData(){return _ref10.apply(this,arguments);};}();_context8.prev=4;_context8.next=7;return putData();case 7:dispatch(getProducts());dispatch(uiActions.updateProductLoading());_context8.next=14;break;case 11:_context8.prev=11;_context8.t0=_context8[\"catch\"](4);console.log(_context8.t0);case 14:case\"end\":return _context8.stop();}}},_callee8,null,[[4,11]]);}));return function(_x4){return _ref9.apply(this,arguments);};}();};","map":{"version":3,"sources":["C:/Users/Lenovo/Documents/node/lennitaFront/LennitaBB/src/store/actions/products-actions.js"],"names":["axios","productsActions","uiActions","api","getProducts","dispatch","productsLoading","fetchData","get","response","data","products","replaceProducts","console","log","getProductDetails","id","pDetailLoading","productDetails","setProductDetails","addProduct","product","token","addPrductLoading","postData","post","headers","Authorization","withCredentials","message","updateProduct","updateProductLoading","putData","put"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\n\r\nimport { productsActions } from '../products-slice';\r\nimport { uiActions } from '../ui-slice';\r\nimport api from '../../utils/api';\r\n\r\n\r\nexport const getProducts = () => {\r\n    return async dispatch => {\r\n        dispatch(uiActions.productsLoading());\r\n        const fetchData = async () => {\r\n            const response = await axios.get('http://localhost:8000/api/products');\r\n\r\n            const data = await response.data;\r\n            return data;\r\n        };\r\n\r\n        try {\r\n            const products = await fetchData();\r\n\r\n            dispatch(productsActions.replaceProducts(products));\r\n            dispatch(uiActions.productsLoading());\r\n            \r\n        } catch (error) {\r\n            console.log('failed to fetch products');\r\n        }\r\n    }\r\n};\r\n\r\n\r\nexport const getProductDetails = (id) => {\r\n    return async dispatch => {\r\n        dispatch(uiActions.pDetailLoading());\r\n        const fetchData = async () => {\r\n            const response = await axios.get(`http://localhost:8000/api/products/${id}`);\r\n\r\n            const data = await response.data;\r\n            return data;\r\n        };\r\n\r\n        try {\r\n            const productDetails = await fetchData();\r\n            dispatch(productsActions.setProductDetails(productDetails));\r\n            dispatch(uiActions.pDetailLoading());\r\n        } catch (error) {\r\n            console.log('failed to fetch product details');\r\n        }\r\n    }\r\n\r\n};\r\n\r\n\r\nexport const addProduct = ({ product, token }) => {\r\n    return async dispatch => {\r\n        dispatch(uiActions.addPrductLoading());\r\n        await api.get('/sanctum/csrf-cookie');\r\n        \r\n        const postData = async () => {\r\n            const response = await axios.post('http://localhost:8000/api/products', product, {\r\n                    headers: {\r\n                        'Content-Type': 'multipart/form-data',\r\n                        Authorization: 'Bearer ' + token,\r\n                    },\r\n                    withCredentials: true\r\n                });\r\n            const data = response.data;\r\n            return data;\r\n        };\r\n\r\n        try {\r\n            const message = await postData();\r\n            console.log('message : ', message);\r\n            dispatch(getProducts());\r\n            // dispatch(productsActions.addProduct(product));\r\n            dispatch(uiActions.addPrductLoading());\r\n            \r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    };\r\n};\r\n\r\n\r\n\r\n\r\n\r\nexport const updateProduct = ({ product, id, token }) => {\r\n    return async dispatch => {\r\n        dispatch(uiActions.updateProductLoading());\r\n        await api.get('/sanctum/csrf-cookie');\r\n\r\n        const putData = async () => {\r\n            const response = await api.put(`/api/products/${id}`, product, {\r\n                headers: {\r\n                    Authorization: 'Bearer ' + token\r\n                }\r\n            });\r\n            const data = response.data;\r\n            return data;\r\n        };\r\n\r\n        try {\r\n            await putData();\r\n            dispatch(getProducts());\r\n            dispatch(uiActions.updateProductLoading());\r\n            \r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n\r\n    };\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}