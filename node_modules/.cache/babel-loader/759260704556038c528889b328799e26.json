{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/Lenovo/Documents/node/lennitaFront/LennitaBB/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Lenovo/Documents/node/lennitaFront/LennitaBB/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Lenovo\\\\Documents\\\\node\\\\lennitaFront\\\\LennitaBB\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState}from\"react\";import{useFormik}from\"formik\";import*as Yup from\"yup\";import swal from\"sweetalert\";// import Dropzone from \"react-dropzone\";\n// import { useDropzone } from 'react-dropzone';\nimport{FaDollarSign}from\"react-icons/fa\";import{IoMdAddCircle}from\"react-icons/io\";import{useDispatch,useSelector}from\"react-redux\";import{addProduct}from\"../../store/actions/products-actions\";import TheSpinner from\"../../layout/TheSpinner\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddProduct=function AddProduct(){var dispatch=useDispatch();var token=useSelector(function(state){return state.auth.token;});var loading=useSelector(function(state){return state.ui.addPrductLoading;});var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),tnail=_useState2[0],setTnail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),pImages=_useState4[0],setPImages=_useState4[1];var thumbnailHandler=function thumbnailHandler(file){console.log('thumbnail: ',file);setTnail(file);};var imagesHandler=function imagesHandler(event){var imageArray=[];for(var i=0;i<event.target.files.length;i++){imageArray.push(event.target.files[i]);}setPImages(imageArray);};var initialValues={name:\"\",description:\"\",price:\"\",category:\"\",brand:\"\",shipping:false,sku:\"BlkjdfKj23jrdfkj1\"};var formik=useFormik({initialValues:initialValues,validationSchema:Yup.object({name:Yup.string().required(\"Required\"),description:Yup.string().required(\"Required\"),price:Yup.number().required(\"Required\"),category:Yup.string().required(\"Required\"),brand:Yup.string().required(\"Required\")}),onSubmit:function(){var _onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values){var formData,i,shippingValue,payload;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:formData=new FormData();formData.append('thumbnail',tnail);for(i=0;i<pImages.length;i++){formData.append('images[]',pImages[i]);}formData.append('name',values.name);formData.append('description',values.description);formData.append('price',values.price);formData.append('category',values.category);formData.append('brand',values.brand);formData.append('sku',formik.values.sku);shippingValue=formik.values.shipping?1:0;formData.append('shipping',shippingValue);payload={product:formData,token:token};_context.prev=12;_context.next=15;return dispatch(addProduct(payload));case 15:formik.resetForm(initialValues);swal({title:\"Product Created!\",text:\"Product: \".concat(values.name,\" CREATED!\"),icon:\"success\",button:\"OK!\"});_context.next=22;break;case 19:_context.prev=19;_context.t0=_context[\"catch\"](12);console.log(_context.t0);case 22:case\"end\":return _context.stop();}}},_callee,null,[[12,19]]);}));function onSubmit(_x){return _onSubmit.apply(this,arguments);}return onSubmit;}()});// const onDrop = useCallback((acceptedFiles) => {\n//   if (acceptedFiles.length !== 4) {\n//     return;\n//   }\n//   formik.setFieldValue(\"images\", formik.values.images.concat(acceptedFiles))\n// }, [formik])\n// const {getRootProps, getInputProps, isDragActive} = useDropzone({onDrop});\nreturn/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mx-4 my-8 p-8 bg-white shadow-2xl drop-shadow-md\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-4xl text-primary mr-6\",children:/*#__PURE__*/_jsx(IoMdAddCircle,{})}),/*#__PURE__*/_jsx(\"h2\",{className:\"uppercase text-4xl tracking-widest font-semibold\",children:\"Add product\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex m-4 p-8 bg-white shadow-lg\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-3/4\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:formik.handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-1 mb-8\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",className:\"tracking-wider\",children:\"Product name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",id:\"name\",onChange:formik.handleChange,onBlur:formik.handleBlur,value:formik.values.name,className:\"form-input rounded w-full bg-gray-100\",placeholder:\"Enter product name\"}),formik.touched.name&&formik.errors.name&&/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-semibold text-red-500\",children:formik.errors.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-1 mb-8\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",className:\"tracking-wider\",children:\"Description:\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",id:\"description\",onChange:formik.handleChange,onBlur:formik.handleBlur,value:formik.values.description,className:\"form-textarea w-full h-52 bg-gray-100 rounded-md\",placeholder:\"Product description\"}),formik.touched.description&&formik.errors.description&&/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-semibold text-red-500\",children:formik.errors.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-1 mb-8\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"price\",className:\"tracking-wider\",children:\"Price:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"flex items-center justify-center border border-gray-300 border-r-0 py-2 px-3 bg-gray-300 text-black\",children:/*#__PURE__*/_jsx(FaDollarSign,{})}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"price\",id:\"price\",step:\"any\",min:\"0\",onChange:formik.handleChange,onBlur:formik.handleBlur,value:formik.values.price,className:\"form-input rounded-r w-full bg-gray-100\",placeholder:\"Product price\"})]}),formik.touched.price&&formik.errors.price&&/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-semibold text-red-500\",children:formik.errors.price})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-1 mb-8\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category\",className:\"tracking-wider\",children:\"Category:\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"category\",id:\"category\",onChange:formik.handleChange,onBlur:formik.handleBlur,value:formik.values.category,className:\"form-select bg-gray-100\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\"}),/*#__PURE__*/_jsx(\"option\",{value:\"desktop\",children:\"Desktop\"}),/*#__PURE__*/_jsx(\"option\",{value:\"laptop\",children:\"Laptop\"}),/*#__PURE__*/_jsx(\"option\",{value:\"printer\",children:\"Printer\"}),/*#__PURE__*/_jsx(\"option\",{value:\"scanner\",children:\"Scanner\"}),/*#__PURE__*/_jsx(\"option\",{value:\"tablet\",children:\"Tablet\"}),/*#__PURE__*/_jsx(\"option\",{value:\"monitor\",children:\"Monitor\"})]}),formik.touched.category&&formik.errors.category&&/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-semibold text-red-500\",children:formik.errors.category})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-1 mb-8\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"brand\",className:\"tracking-wider mb-3\",children:\"Brand:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"brand\",id:\"apple\",value:\"apple\",onChange:formik.getFieldProps(\"brand\").onChange,className:\"form-radio\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"apple\",className:\"tracking-widest\",children:\"Apple\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"brand\",id:\"dell\",value:\"dell\",onChange:formik.getFieldProps(\"brand\").onChange,className:\"form-radio\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"dell\",className:\"tracking-widest\",children:\"Dell\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"brand\",id:\"hp\",value:\"hp\",onChange:formik.getFieldProps(\"brand\").onChange,className:\"form-radio\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"hp\",className:\"tracking-widest\",children:\"HP\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"brand\",id:\"samsung\",value:\"samsung\",onChange:formik.getFieldProps(\"brand\").onChange,className:\"form-radio\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"samsung\",className:\"tracking-widest\",children:\"Samsung\"})]})]}),formik.touched.brand&&formik.errors.brand&&/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-semibold text-red-500\",children:formik.errors.brand})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 mb-8\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"shipping\",id:\"shipping\",onChange:function onChange(){return formik.setFieldValue('shipping',!formik.values.shipping);},value:formik.values.shipping,className:\"form-checkbox\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"shipping\",className:\"tracking-wider\",children:\"Free shipping\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-1 mb-8\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"thumbnail\",className:\"tracking-wider\",children:\"Thumbnail:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"thumbnail\",id:\"thumbnail\",accept:\"image/*\"// onChange={(event) => {\n//   formik.setFieldValue(\"thumbnail\", () => {\n//     const fd = new FormData();\n//     fd.append('thumbnail', event.currentTarget.files[0]);\n//     return fd;\n//   });\n// }}\n// onChange={(event) => {\n//   formik.setFieldValue('thumbnail', event.target.files[0]);\n// }}\n,onChange:function onChange(e){return thumbnailHandler(e.target.files[0]);},className:\"w-full\"}),formik.touched.thumbnail&&formik.errors.thumbnail&&/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-semibold text-red-500\",children:formik.errors.thumbnail})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-1 mb-8\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"images\",className:\"tracking-wider\",children:\"Product Images:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"images[]\",id:\"images\",accept:\"image/*\"// onChange={(event) => {\n//   // formik.setFieldValue(\"images\", event.currentTarget.files)\n//   formik.setFieldValue(\"images\", () => {\n//     const fd = new FormData();\n//     fd.append('images', event.target.files);\n//     return fd;\n//   })\n// }}\n,onChange:imagesHandler,multiple:true}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs\",children:\"Upload 4 images *\"})]}),/*#__PURE__*/_jsx(\"hr\",{}),loading?/*#__PURE__*/_jsx(TheSpinner,{}):/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-2 block mt-3 ml-auto text-primary border border-primary hover:text-white hover:bg-primary rounded-md\",children:\"Create Product\"})]})})})]});};export default AddProduct;","map":{"version":3,"sources":["C:/Users/Lenovo/Documents/node/lennitaFront/LennitaBB/src/components/dashboard/AddProduct.jsx"],"names":["React","useState","useFormik","Yup","swal","FaDollarSign","IoMdAddCircle","useDispatch","useSelector","addProduct","TheSpinner","AddProduct","dispatch","token","state","auth","loading","ui","addPrductLoading","tnail","setTnail","pImages","setPImages","thumbnailHandler","file","console","log","imagesHandler","event","imageArray","i","target","files","length","push","initialValues","name","description","price","category","brand","shipping","sku","formik","validationSchema","object","string","required","number","onSubmit","values","formData","FormData","append","shippingValue","payload","product","resetForm","title","text","icon","button","handleSubmit","handleChange","handleBlur","touched","errors","getFieldProps","onChange","setFieldValue","e","thumbnail"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { useFormik } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport swal from \"sweetalert\";\r\n// import Dropzone from \"react-dropzone\";\r\n// import { useDropzone } from 'react-dropzone';\r\n\r\nimport { FaDollarSign } from \"react-icons/fa\";\r\nimport { IoMdAddCircle } from \"react-icons/io\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { addProduct } from \"../../store/actions/products-actions\";\r\nimport TheSpinner from \"../../layout/TheSpinner\";\r\n\r\nconst AddProduct = () => {\r\n  const dispatch = useDispatch();\r\n  const token = useSelector((state) => state.auth.token);\r\n  const loading = useSelector((state) => state.ui.addPrductLoading);\r\n  const [tnail, setTnail] = useState(\"\");\r\n  const [pImages, setPImages] = useState(\"\");\r\n\r\n  const thumbnailHandler = (file) => {\r\n    console.log('thumbnail: ', file);\r\n    setTnail(file);\r\n  };\r\n\r\n\r\n  const imagesHandler = (event) => {\r\n    const imageArray = [];\r\n    for (let i=0; i < event.target.files.length; i++) {\r\n      imageArray.push(event.target.files[i]);\r\n    }\r\n    setPImages(imageArray);\r\n\r\n  };\r\n\r\n  const initialValues = {\r\n    name: \"\",\r\n    description: \"\",\r\n    price: \"\",\r\n    category: \"\",\r\n    brand: \"\",\r\n    shipping: false,\r\n    sku: \"BlkjdfKj23jrdfkj1\",\r\n  };\r\n\r\n  const formik = useFormik({\r\n    initialValues,\r\n    validationSchema: Yup.object({\r\n      name: Yup.string().required(\"Required\"),\r\n      description: Yup.string().required(\"Required\"),\r\n      price: Yup.number().required(\"Required\"),\r\n      category: Yup.string().required(\"Required\"),\r\n      brand: Yup.string().required(\"Required\"),\r\n    }),\r\n    onSubmit: async (values) => {\r\n      const formData = new FormData();\r\n      formData.append('thumbnail', tnail);\r\n\r\n      for (let i=0; i < pImages.length; i++) {\r\n        formData.append('images[]', pImages[i]);\r\n      } \r\n\r\n      formData.append('name', values.name);\r\n      formData.append('description', values.description);\r\n      formData.append('price', values.price);\r\n      formData.append('category', values.category);\r\n      formData.append('brand', values.brand);\r\n      formData.append('sku', formik.values.sku);\r\n      const shippingValue = formik.values.shipping ? 1 : 0;\r\n      formData.append('shipping', shippingValue);\r\n\r\n      const payload = {\r\n        product: formData,\r\n        token\r\n      };\r\n\r\n      try {\r\n        await dispatch(addProduct(payload));\r\n        formik.resetForm(initialValues);\r\n        swal({\r\n          title: \"Product Created!\",\r\n          text: `Product: ${values.name} CREATED!`,\r\n          icon: \"success\",\r\n          button: \"OK!\",\r\n        });\r\n        \r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n  });\r\n\r\n  // const onDrop = useCallback((acceptedFiles) => {\r\n  //   if (acceptedFiles.length !== 4) {\r\n  //     return;\r\n  //   }\r\n  //   formik.setFieldValue(\"images\", formik.values.images.concat(acceptedFiles))\r\n  // }, [formik])\r\n\r\n  // const {getRootProps, getInputProps, isDragActive} = useDropzone({onDrop});\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex items-center mx-4 my-8 p-8 bg-white shadow-2xl drop-shadow-md\">\r\n        <span className=\"text-4xl text-primary mr-6\">\r\n          <IoMdAddCircle />\r\n        </span>\r\n        <h2 className=\"uppercase text-4xl tracking-widest font-semibold\">\r\n          Add product\r\n        </h2>\r\n      </div>\r\n      <div className=\"flex m-4 p-8 bg-white shadow-lg\">\r\n        <div className=\"w-3/4\">\r\n          <form onSubmit={formik.handleSubmit}>\r\n            {/* name input */}\r\n            <div className=\"flex flex-col space-y-1 mb-8\">\r\n              <label htmlFor=\"name\" className=\"tracking-wider\">\r\n                Product name:\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"name\"\r\n                id=\"name\"\r\n                onChange={formik.handleChange}\r\n                onBlur={formik.handleBlur}\r\n                value={formik.values.name}\r\n                className=\"form-input rounded w-full bg-gray-100\"\r\n                placeholder=\"Enter product name\"\r\n              />\r\n              {formik.touched.name && formik.errors.name && (\r\n                <p className=\"text-xs font-semibold text-red-500\">\r\n                  {formik.errors.name}\r\n                </p>\r\n              )}\r\n            </div>\r\n            {/* description input */}\r\n            <div className=\"flex flex-col space-y-1 mb-8\">\r\n              <label htmlFor=\"description\" className=\"tracking-wider\">\r\n                Description:\r\n              </label>\r\n              <textarea\r\n                name=\"description\"\r\n                id=\"description\"\r\n                onChange={formik.handleChange}\r\n                onBlur={formik.handleBlur}\r\n                value={formik.values.description}\r\n                className=\"form-textarea w-full h-52 bg-gray-100 rounded-md\"\r\n                placeholder=\"Product description\"\r\n              ></textarea>\r\n              {formik.touched.description && formik.errors.description && (\r\n                <p className=\"text-xs font-semibold text-red-500\">\r\n                  {formik.errors.description}\r\n                </p>\r\n              )}\r\n            </div>\r\n            {/* price input */}\r\n            <div className=\"flex flex-col space-y-1 mb-8\">\r\n              <label htmlFor=\"price\" className=\"tracking-wider\">\r\n                Price:\r\n              </label>\r\n              <div className=\"flex\">\r\n                <span className=\"flex items-center justify-center border border-gray-300 border-r-0 py-2 px-3 bg-gray-300 text-black\">\r\n                  <FaDollarSign />\r\n                </span>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"price\"\r\n                  id=\"price\"\r\n                  step=\"any\"\r\n                  min=\"0\"\r\n                  onChange={formik.handleChange}\r\n                  onBlur={formik.handleBlur}\r\n                  value={formik.values.price}\r\n                  className=\"form-input rounded-r w-full bg-gray-100\"\r\n                  placeholder=\"Product price\"\r\n                />\r\n              </div>\r\n              {formik.touched.price && formik.errors.price && (\r\n                <p className=\"text-xs font-semibold text-red-500\">\r\n                  {formik.errors.price}\r\n                </p>\r\n              )}\r\n            </div>\r\n            {/* category input */}\r\n            <div className=\"flex flex-col space-y-1 mb-8\">\r\n              <label htmlFor=\"category\" className=\"tracking-wider\">\r\n                Category:\r\n              </label>\r\n              <select\r\n                name=\"category\"\r\n                id=\"category\"\r\n                onChange={formik.handleChange}\r\n                onBlur={formik.handleBlur}\r\n                value={formik.values.category}\r\n                className=\"form-select bg-gray-100\"\r\n              >\r\n                <option value=\"\"></option>\r\n                <option value=\"desktop\">Desktop</option>\r\n                <option value=\"laptop\">Laptop</option>\r\n                <option value=\"printer\">Printer</option>\r\n                <option value=\"scanner\">Scanner</option>\r\n                <option value=\"tablet\">Tablet</option>\r\n                <option value=\"monitor\">Monitor</option>\r\n              </select>\r\n              {formik.touched.category && formik.errors.category && (\r\n                <p className=\"text-xs font-semibold text-red-500\">\r\n                  {formik.errors.category}\r\n                </p>\r\n              )}\r\n            </div>\r\n            {/* brand input */}\r\n            <div className=\"flex flex-col space-y-1 mb-8\">\r\n              <label htmlFor=\"brand\" className=\"tracking-wider mb-3\">\r\n                Brand:\r\n              </label>\r\n              <div className=\"flex justify-between items-center\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <input\r\n                    type=\"radio\"\r\n                    name=\"brand\"\r\n                    id=\"apple\"\r\n                    value=\"apple\"\r\n                    onChange={formik.getFieldProps(\"brand\").onChange}\r\n                    className=\"form-radio\"\r\n                  />\r\n                  <label htmlFor=\"apple\" className=\"tracking-widest\">\r\n                    Apple\r\n                  </label>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <input\r\n                    type=\"radio\"\r\n                    name=\"brand\"\r\n                    id=\"dell\"\r\n                    value=\"dell\"\r\n                    onChange={formik.getFieldProps(\"brand\").onChange}\r\n                    className=\"form-radio\"\r\n                  />\r\n                  <label htmlFor=\"dell\" className=\"tracking-widest\">\r\n                    Dell\r\n                  </label>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <input\r\n                    type=\"radio\"\r\n                    name=\"brand\"\r\n                    id=\"hp\"\r\n                    value=\"hp\"\r\n                    onChange={formik.getFieldProps(\"brand\").onChange}\r\n                    className=\"form-radio\"\r\n                  />\r\n                  <label htmlFor=\"hp\" className=\"tracking-widest\">\r\n                    HP\r\n                  </label>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <input\r\n                    type=\"radio\"\r\n                    name=\"brand\"\r\n                    id=\"samsung\"\r\n                    value=\"samsung\"\r\n                    onChange={formik.getFieldProps(\"brand\").onChange}\r\n                    className=\"form-radio\"\r\n                  />\r\n                  <label htmlFor=\"samsung\" className=\"tracking-widest\">\r\n                    Samsung\r\n                  </label>\r\n                </div>\r\n              </div>\r\n              {formik.touched.brand && formik.errors.brand && (\r\n                <p className=\"text-xs font-semibold text-red-500\">\r\n                  {formik.errors.brand}\r\n                </p>\r\n              )}\r\n            </div>\r\n            {/* shipping input */}\r\n            <div className=\"flex items-center space-x-3 mb-8\">\r\n              <input\r\n                type=\"checkbox\"\r\n                name=\"shipping\"\r\n                id=\"shipping\"\r\n                onChange={() => formik.setFieldValue('shipping', !formik.values.shipping)}\r\n                value={formik.values.shipping}\r\n                className=\"form-checkbox\"\r\n              />\r\n              <label htmlFor=\"shipping\" className=\"tracking-wider\">\r\n                Free shipping\r\n              </label>\r\n            </div>\r\n            {/* thumbnail input */}\r\n            <div className=\"flex flex-col space-y-1 mb-8\">\r\n              <label htmlFor=\"thumbnail\" className=\"tracking-wider\">\r\n                Thumbnail:\r\n              </label>\r\n              <input\r\n                type=\"file\"\r\n                name=\"thumbnail\"\r\n                id=\"thumbnail\"\r\n                accept=\"image/*\"\r\n                // onChange={(event) => {\r\n                //   formik.setFieldValue(\"thumbnail\", () => {\r\n                //     const fd = new FormData();\r\n                //     fd.append('thumbnail', event.currentTarget.files[0]);\r\n                //     return fd;\r\n                //   });\r\n                // }}\r\n                // onChange={(event) => {\r\n                //   formik.setFieldValue('thumbnail', event.target.files[0]);\r\n                // }}\r\n                onChange={(e) => thumbnailHandler(e.target.files[0])}\r\n                className=\"w-full\"\r\n              />\r\n              {formik.touched.thumbnail && formik.errors.thumbnail && (\r\n                <p className=\"text-xs font-semibold text-red-500\">\r\n                  {formik.errors.thumbnail}\r\n                </p>\r\n              )}\r\n            </div>\r\n            {/* images input */}\r\n            <div className=\"flex flex-col space-y-1 mb-8\">\r\n              <label htmlFor=\"images\" className=\"tracking-wider\">\r\n                Product Images:\r\n              </label>\r\n              <input\r\n                type=\"file\"\r\n                name=\"images[]\"\r\n                id=\"images\"\r\n                accept=\"image/*\"\r\n                // onChange={(event) => {\r\n                //   // formik.setFieldValue(\"images\", event.currentTarget.files)\r\n                //   formik.setFieldValue(\"images\", () => {\r\n                //     const fd = new FormData();\r\n                //     fd.append('images', event.target.files);\r\n                //     return fd;\r\n                //   })\r\n                // }}\r\n                onChange={imagesHandler}\r\n                multiple\r\n              />\r\n              <p className=\"text-xs\">Upload 4 images *</p>\r\n              {/* <div className=\"w-full h-auto bg-gray-500\" {...getRootProps()} >\r\n                <input {...getInputProps()} />\r\n                {\r\n                  isDragActive ?\r\n                  <p>Drop the images here ...</p> :\r\n                  <p>Drag 'n' Drop 4 images here, or click the select images</p>\r\n                }\r\n              </div> */}\r\n              {/* <Dropzone className=\"w-full h-auto rounded\" accept=\"image/*\" onDrop={(acceptedFiles) => {\r\n                    if (acceptedFiles.length === 0) {\r\n                        return;\r\n                    }\r\n                    formik.setFieldValue('images', formik.values.images.concat(acceptedFiles))\r\n                }}>\r\n                    {() => {\r\n                        if (formik.values.images.length === 0) {\r\n                            return <p>Upload 4 product images</p>\r\n                        }\r\n                    }}\r\n                </Dropzone> */}\r\n              {/* {formik.touched.thumbnail && formik.errors.thumbnail && (\r\n                <p className=\"text-xs font-semibold text-red-500\">\r\n                  {formik.errors.thumbnail}\r\n                </p>\r\n              )} */}\r\n            </div>\r\n            <hr />\r\n            {loading ? <TheSpinner /> : \r\n            <button\r\n              type=\"submit\"\r\n              className=\"px-4 py-2 block mt-3 ml-auto text-primary border border-primary hover:text-white hover:bg-primary rounded-md\"\r\n            >\r\n              Create Product\r\n            </button>\r\n            }\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddProduct;\r\n"]},"metadata":{},"sourceType":"module"}