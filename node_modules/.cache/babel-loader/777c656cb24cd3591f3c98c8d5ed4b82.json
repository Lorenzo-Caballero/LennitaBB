{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/Lenovo/Documents/node/lennitaFront/LennitaBB/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Lenovo\\\\Documents\\\\node\\\\lennitaFront\\\\LennitaBB\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";// import axios from \"axios\";\nimport api from\"../../utils/api\";import{authActions}from'../auth-slice';import{uiActions}from\"../ui-slice\";export var login=function login(payload){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var postData,user;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch(uiActions.loginLoading());_context2.next=3;return api.get('/sanctum/csrf-cookie');case 3:postData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return api.post(\"/api/login\",payload);case 2:response=_context.sent;_context.next=5;return response.data;case 5:data=_context.sent;return _context.abrupt(\"return\",data);case 7:case\"end\":return _context.stop();}}},_callee);}));return function postData(){return _ref2.apply(this,arguments);};}();_context2.prev=4;_context2.next=7;return postData();case 7:user=_context2.sent;_context2.next=10;return dispatch(authActions.login(user));case 10:dispatch(uiActions.loginLoading());_context2.next=16;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](4);console.log(_context2.t0);case 16:case\"end\":return _context2.stop();}}},_callee2,null,[[4,13]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var register=function register(payload){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var postData,user;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dispatch(uiActions.registerLoading());_context4.next=3;return api.get('/sanctum/csrf-cookie');case 3:postData=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var response,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return api.post(\"/api/register\",payload);case 2:response=_context3.sent;_context3.next=5;return response.data;case 5:data=_context3.sent;return _context3.abrupt(\"return\",data);case 7:case\"end\":return _context3.stop();}}},_callee3);}));return function postData(){return _ref4.apply(this,arguments);};}();_context4.prev=4;_context4.next=7;return postData();case 7:user=_context4.sent;_context4.next=10;return dispatch(authActions.register(user));case 10:dispatch(uiActions.registerLoading());_context4.next=16;break;case 13:_context4.prev=13;_context4.t0=_context4[\"catch\"](4);console.log(_context4.t0);case 16:case\"end\":return _context4.stop();}}},_callee4,null,[[4,13]]);}));return function(_x2){return _ref3.apply(this,arguments);};}();};export var logout=function logout(token){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch){var logout;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return api.get('/sanctum/csrf-cookie');case 2:logout=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var response,message;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return api.post('/api/logout',null,{headers:{Authorization:'Bearer '+token}// withCredentials: true\n});case 2:response=_context5.sent;message=response.data;return _context5.abrupt(\"return\",message);case 5:case\"end\":return _context5.stop();}}},_callee5);}));return function logout(){return _ref6.apply(this,arguments);};}();_context6.prev=3;_context6.next=6;return logout();case 6:dispatch(authActions.logout());_context6.next=12;break;case 9:_context6.prev=9;_context6.t0=_context6[\"catch\"](3);console.log(_context6.t0);case 12:case\"end\":return _context6.stop();}}},_callee6,null,[[3,9]]);}));return function(_x3){return _ref5.apply(this,arguments);};}();};","map":{"version":3,"sources":["C:/Users/Lenovo/Documents/node/lennitaFront/LennitaBB/src/store/actions/auth-actions.js"],"names":["api","authActions","uiActions","login","payload","dispatch","loginLoading","get","postData","post","response","data","user","console","log","register","registerLoading","logout","token","headers","Authorization","message"],"mappings":"oSAAA;AACA,MAAOA,CAAAA,GAAP,KAAgB,iBAAhB,CACA,OAASC,WAAT,KAA4B,eAA5B,CACA,OAASC,SAAT,KAA0B,aAA1B,CAGA,MAAO,IAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACC,OAAD,CAAa,CAC9B,+FAAO,kBAAMC,QAAN,wIACHA,QAAQ,CAACH,SAAS,CAACI,YAAV,EAAD,CAAR,CADG,uBAEGN,CAAAA,GAAG,CAACO,GAAJ,CAAQ,sBAAR,CAFH,QAIGC,QAJH,2FAIc,2KACUR,CAAAA,GAAG,CAACS,IAAJ,CAAS,YAAT,CAAuBL,OAAvB,CADV,QACPM,QADO,qCAGMA,CAAAA,QAAQ,CAACC,IAHf,QAGPA,IAHO,+CAINA,IAJM,wDAJd,kBAIGH,CAAAA,QAJH,oFAYoBA,CAAAA,QAAQ,EAZ5B,QAYOI,IAZP,wCAaOP,CAAAA,QAAQ,CAACJ,WAAW,CAACE,KAAZ,CAAkBS,IAAlB,CAAD,CAbf,SAcCP,QAAQ,CAACH,SAAS,CAACI,YAAV,EAAD,CAAR,CAdD,qFAgBCO,OAAO,CAACC,GAAR,eAhBD,uEAAP,+DAmBH,CApBM,CAyBP,MAAO,IAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACX,OAAD,CAAa,CACjC,gGAAO,kBAAMC,QAAN,wIACHA,QAAQ,CAACH,SAAS,CAACc,eAAV,EAAD,CAAR,CADG,uBAEGhB,CAAAA,GAAG,CAACO,GAAJ,CAAQ,sBAAR,CAFH,QAIGC,QAJH,2FAIc,iLACUR,CAAAA,GAAG,CAACS,IAAJ,CAAS,eAAT,CAA0BL,OAA1B,CADV,QACPM,QADO,uCAGMA,CAAAA,QAAQ,CAACC,IAHf,QAGPA,IAHO,iDAINA,IAJM,0DAJd,kBAIGH,CAAAA,QAJH,oFAYoBA,CAAAA,QAAQ,EAZ5B,QAYOI,IAZP,wCAaOP,CAAAA,QAAQ,CAACJ,WAAW,CAACc,QAAZ,CAAqBH,IAArB,CAAD,CAbf,SAcCP,QAAQ,CAACH,SAAS,CAACc,eAAV,EAAD,CAAR,CAdD,qFAgBCH,OAAO,CAACC,GAAR,eAhBD,uEAAP,iEAmBH,CApBM,CAuBP,MAAO,IAAMG,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACC,KAAD,CAAW,CAC7B,gGAAO,kBAAMb,QAAN,wJACGL,CAAAA,GAAG,CAACO,GAAJ,CAAQ,sBAAR,CADH,QAGGU,MAHH,2FAGY,oLACYjB,CAAAA,GAAG,CAACS,IAAJ,CAAS,aAAT,CAAwB,IAAxB,CAA8B,CACjDU,OAAO,CAAE,CACLC,aAAa,CAAE,UAAYF,KADtB,CAGT;AAJiD,CAA9B,CADZ,QACLR,QADK,gBAOLW,OAPK,CAOKX,QAAQ,CAACC,IAPd,kCAQJU,OARI,0DAHZ,kBAGGJ,CAAAA,MAHH,oFAeOA,CAAAA,MAAM,EAfb,QAgBCZ,QAAQ,CAACJ,WAAW,CAACgB,MAAZ,EAAD,CAAR,CAhBD,mFAmBCJ,OAAO,CAACC,GAAR,eAnBD,sEAAP,iEAuBH,CAxBM","sourcesContent":["// import axios from \"axios\";\r\nimport api from \"../../utils/api\";\r\nimport { authActions } from '../auth-slice';\r\nimport { uiActions } from \"../ui-slice\";\r\n\r\n\r\nexport const login = (payload) => {\r\n    return async dispatch => {\r\n        dispatch(uiActions.loginLoading());\r\n        await api.get('/sanctum/csrf-cookie');\r\n\r\n        const postData = async () => {\r\n            const response = await api.post(\"/api/login\", payload);\r\n\r\n            const data = await response.data;\r\n            return data;\r\n        };\r\n\r\n        try {\r\n            const user = await postData();\r\n            await dispatch(authActions.login(user));\r\n            dispatch(uiActions.loginLoading());\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n};\r\n\r\n\r\n\r\n\r\nexport const register = (payload) => {\r\n    return async dispatch => {\r\n        dispatch(uiActions.registerLoading())\r\n        await api.get('/sanctum/csrf-cookie');\r\n\r\n        const postData = async () => {\r\n            const response = await api.post(\"/api/register\", payload);\r\n\r\n            const data = await response.data;\r\n            return data;\r\n        };\r\n\r\n        try {\r\n            const user = await postData();\r\n            await dispatch(authActions.register(user));\r\n            dispatch(uiActions.registerLoading());\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n};\r\n\r\n\r\nexport const logout = (token) => {\r\n    return async dispatch => {\r\n        await api.get('/sanctum/csrf-cookie');\r\n\r\n        const logout = async () => {\r\n            const response = await api.post('/api/logout', null, {\r\n                headers: {\r\n                    Authorization: 'Bearer ' + token\r\n                },\r\n                // withCredentials: true\r\n            });\r\n            const message = response.data;\r\n            return message;\r\n        };\r\n\r\n        try {\r\n            await logout();\r\n            dispatch(authActions.logout());\r\n            \r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}